{"remainingRequest":"/home/hercules/funny/frontend/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/hercules/funny/frontend/src/views/Register.vue?vue&type=style&index=0&id=63ae9146&scoped=true&lang=css","dependencies":[{"path":"/home/hercules/funny/frontend/src/views/Register.vue","mtime":1613869064000},{"path":"/home/hercules/funny/frontend/node_modules/css-loader/dist/cjs.js","mtime":1613869030000},{"path":"/home/hercules/funny/frontend/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1613869059000},{"path":"/home/hercules/funny/frontend/node_modules/postcss-loader/src/index.js","mtime":1613869046000},{"path":"/home/hercules/funny/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1613869025000},{"path":"/home/hercules/funny/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1613869059000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CkBpbXBvcnQgJy4uLy4uL25vZGVfbW9kdWxlcy9idWxtYSc7Cgo="},{"version":3,"sources":["/home/hercules/funny/frontend/src/views/Register.vue"],"names":[],"mappings":";AAgFA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC","file":"/home/hercules/funny/frontend/src/views/Register.vue","sourceRoot":"","sourcesContent":["<template>\n<div>\n    <div class=\"columns\">\n        <div class=\"column\"></div>\n        <div class=\"column\">\n\n            <form @submit.prevent=\"register()\" method=\"post\">\n                <div class=\"columns\">\n                    <div class=\"column\">\n                        <div class=\"field\">\n                            <label class=\"label\">First Name</label>\n                            <div class=\"control\">\n                                <input class=\"input\" type=\"text\" v-model=\"first\">\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"column\">\n                        <div class=\"field\">\n                            <label class=\"label\">Last Name</label>\n                            <div class=\"control\">\n                                <input class=\"input\" type=\"text\" v-model=\"last\">\n                            </div> \n                        </div>\n                    </div>\n                </div>\n\n\n\n                <div class=\"field\">\n                    <label class=\"label\">Username</label>\n                    <div class=\"control has-icons-left has-icons-right\">\n                        <input :class=\"usernameClass\" type=\"text\" placeholder=\"Make it unique!\" v-model=\"username\" @keyup=\"checkUsername()\" id=\"username_reg\" autocomplete=\"off\">\n                        <span class=\"icon is-small is-left\">\n                        <i class=\"fas fa-user\"></i>\n                        </span>\n                        <span class=\"icon is-small is-right\" id=\"check-username-holder\">\n                        <i :class=\"usernameIconClass\"></i>\n                        </span>\n                    </div>\n                    <p :class=\"usernameAvailible\">{{username_ready}}</p>\n                </div>\n                <div class=\"field\">\n                    <label class=\"label\">Email</label>\n                    <div class=\"control  has-icons-left has-icons-right\">\n                        <input :class=\"emailClass\" type=\"text\" placeholder=\"vue-is-awesome@example.com\" v-model=\"email\" @keyup=\"checkEmail()\" id=\"email_reg\">\n                        <span class=\"icon is-small is-left\">\n                        <i class=\"fas fa-at\"></i>\n                        </span>\n                    </div>\n                </div>\n            \n                <div class=\"field\">\n                    <label class=\"label\">Password</label>\n                    <div class=\"control has-icons-left has-icons-right\">\n                        <input type=\"password\" class=\"input\" v-model=\"password\">\n                        <span class=\"icon is-small is-left\">\n                        <i class=\"fas fa-key\"></i>\n                        </span>\n                    </div>\n                </div>\n\n                <div class=\"field\">\n                    <label class=\"label\">Profile Picture</label>\n                    <div class=\"control has-icons-left has-icons-right\">\n                        <input type=\"url\" class=\"input\" v-model=\"pfp\">\n                        <span class=\"icon is-small is-left\">\n                        <i class=\"fas fa-images\"></i>\n                        </span>\n                    </div>\n                </div>\n                <button class=\"button is-primary\" type=\"submit\" :disabled=\"!(usernameReady === true && emailReady === true)\">Register</button>\n            </form>\n\n        </div>\n        <div class=\"column\"></div>\n    </div>\n\n</div>\n</template>\n<style scoped>\n@import '../../node_modules/bulma';\n\n</style>\n<script>\nexport default {\n    name: \"Register\",\n    data() {\n        return {\n            username: '',\n            password: '',\n            first: '',\n            last: '',\n            email: '',\n            pfp: '',\n            emailReady: '',\n            usernameReady: '',\n            usernameClass: 'input',\n            usernameIconClass: '',\n            usernameAvailible: '',\n            username_ready: '',\n            emailClass: 'input'\n        }\n    },\n    methods: {\n        checkEmail() {\n            const domains = [\n                '.com',\n                '.net',\n                '.org'\n            ]\n            if (!(this.email.includes('@'))) return;\n            var test = this.email.substr(this.email.length - 4)\n            for (var i = 0; i < 3; i++) {\n                let j = domains[i];\n                console.log(test)\n                if (test === j) {\n                    this.emailReady = true;\n                    this.emailClass = 'input is-success'\n                    return;\n                }\n            }\n            this.emailReady = false;\n            this.emailClass = 'input is-danger'\n            return;\n        },\n        checkUsername() {\n            fetch(\"http://127.0.0.1:8000/api/check\", {\n                method: \"POST\",\n                body: JSON.stringify({\n                    'name': this.username\n                })\n            }).then(res => res.json()).then(data => {\n                console.log(data.is_ok)\n                this.usernameReady = data.is_ok\n                if (data.is_ok === false)  {\n                    this.usernameClass = 'input is-danger'\n                    this.usernameIconClass = 'fas fa-times',\n                    this.usernameAvailible = 'help is-danger',\n                    this.username_ready = 'This username is already taken! :('\n                    }\n                else {\n                    this.usernameClass = 'input is-success'\n                    this.usernameIconClass = 'fas fa-check',\n                    this.usernameAvailible = 'help is-success',\n                    this.username_ready = 'This username is availible'\n                    }\n            })\n        },\n        register() {\n            fetch(\"http://127.0.0.1:8000/api/register\", {\n                method: \"POST\",\n                body: JSON.stringify({\n                    username: this.username,\n                    first: this.first,\n                    last: this.last,\n                    email: this.email,\n                    password: this.password,\n                    pfp: this.pfp,\n                })\n            }).then(res => res.json()).then(data => {\n                console.log(JSON.stringify(data.user))\n                window.localStorage.setItem('user', JSON.stringify(data.user))\n                this.$emit('update', JSON.stringify(data.user))\n                this.$router.push('/')\n            })\n        }\n    },\n\n}\n</script>"]}]}