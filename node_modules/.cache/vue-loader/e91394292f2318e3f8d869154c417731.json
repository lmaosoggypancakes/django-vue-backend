{"remainingRequest":"/home/hercules/funny/frontend/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/hercules/funny/frontend/src/views/NewPost.vue?vue&type=style&index=0&id=06070d16&lang=scss&scoped=true","dependencies":[{"path":"/home/hercules/funny/frontend/src/views/NewPost.vue","mtime":1614478123660},{"path":"/home/hercules/funny/frontend/node_modules/css-loader/dist/cjs.js","mtime":1613869030000},{"path":"/home/hercules/funny/frontend/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":1613869059000},{"path":"/home/hercules/funny/frontend/node_modules/postcss-loader/src/index.js","mtime":1613869046000},{"path":"/home/hercules/funny/frontend/node_modules/sass-loader/dist/cjs.js","mtime":1613869055000},{"path":"/home/hercules/funny/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1613869025000},{"path":"/home/hercules/funny/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1613869059000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CkBpbXBvcnQgIi4uLy4uL25vZGVfbW9kdWxlcy9idWxtYSI7Cg=="},{"version":3,"sources":["/home/hercules/funny/frontend/src/views/NewPost.vue"],"names":[],"mappings":";AAmJA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC","file":"/home/hercules/funny/frontend/src/views/NewPost.vue","sourceRoot":"","sourcesContent":["<template>\n    <div>\n        <div class=\"notify\"></div>\n        <div class=\"columns\">\n            <div class=\"column\">ad space</div>\n            <div class=\"column\">\n                <h1 class=\"title\">New Listing</h1>\n                <progress class=\"progress is-info\" :value=\"percent()\" max=\"100\">45%</progress>\n                <hr>\n                <form @submit.prevent='ready()'>\n                    <div class=\"field\">\n                        <label class=\"label\">Title</label>\n                        <div class=\"control has-icons-left\">\n                            <input class=\"input\" type=\"text\" placeholder=\"My Teddy Bear\" v-model=\"title\">\n                            <span class=\"icon is-small is-left\">\n                                <i class=\"fas fa-heading\"></i>\n                            </span>\n                        </div>\n                    </div>\n                    <hr>\n                    <div class=\"field\">\n                        <label class=\"label\">Picture</label>\n                        <div class=\"control has-icons-left\">\n                            <input class=\"input\" type=\"text\" placeholder=\"URL\" v-model=\"picture\">\n                            <span class=\"icon is-small is-left\">\n                                <i class=\"fas fa-image\"></i>\n                            </span>                               \n                        </div>\n                    </div>\n                    <div class=\"field\">\n                        <label class=\"label\">Description</label>\n                        <div class=\"control has-icons-left\">\n                            <textarea class=\"textarea\"  v-model=\"desc\"></textarea>                            \n                        </div>\n                    </div>\n                    <hr>\n                    <div class=\"field\">\n                        <label class=\"label\">Starting Bid</label>\n                        <div class=\"control has-icons-left\">\n                            <input type=\"number\" v-model=\"min_bid\" class=\"input\">\n                            <span class=\"icon is-small is-left\">\n                                <i class=\"fas fa-dollar-sign\"></i>\n                            </span>                               \n                        </div>\n                    </div>\n                    <hr>\n                    <div class=\"field\">\n                        <label class=\"label\">End Time</label>\n                        <div class=\"control has-icons-left\">\n                            <datepicker v-model=\"date\" :lowerLimit=\"now\" class=\"input\" id=\"date\"/>\n                            <span class=\"icon is-small is-left\">\n                                <i class=\"fas fa-clock\"></i>\n                            </span>                               \n                        </div>\n                    </div>\n                    <button type=\"submit\" class=\"button is-primary\" :disabled=\"!(percent() === 100)\">Submit</button>\n                </form>\n            </div>\n            <div class=\"column\"></div>\n        </div>\n\n    </div>\n</template>\n<script>\n    import Datepicker from 'vue3-datepicker'\n    import { ref } from 'vue'\n\n    import $ from 'jquery'\n    export default {\n        name: \"NewPost\",\n        data() {\n            return  {\n                title: \"\",\n                desc: \"\",\n                picture: \"\",\n                min_bid: 0,\n                date: ref(new Date()),\n                now: new Date(),\n                progress: {\n                    title: 0,\n                    desc: 0,\n                    piture: 0,\n                    min_bid: 0\n                }\n            }\n        },\n        components: {\n            Datepicker\n        },\n        methods: {\n            notify(event, type) {\n                let alert = document.createElement('div')\n                alert.className = 'notification is-' + type\n                alert.innerHTML = event\n                $(\".notify\").html(\"\")\n                document.querySelector(\".notify\").appendChild(alert)\n            },\n            ready() {\n                let tmp = $(\"#date\").val()\n                tmp = tmp.split(\"-\")\n                let body = {\n                    title: this.title,\n                    desc: this.desc,\n                    picture: this.picture,\n                    min_bid: this.min_bid,\n                    user: JSON.parse(window.localStorage.getItem('user')).id,\n                    end: {\n                        month: tmp[1],\n                        day: tmp[2],\n                        year: tmp[0]\n                    }\n                }\n                console.log(body);\n                fetch(\"http://127.0.0.1:8000/api/new\", {\n                    method: \"POST\",\n                    body: JSON.stringify(body)\n                }).then(res => res.json()).then(data => {\n                    this.notify(data.message, data.type)\n                })\n            },\n            percent() {\n                let num = 0;\n                var i = 0;\n                for (i in this.progress) {\n                    num += this.progress[i]\n                }\n                return num;\n            }\n        },\n        watch: {\n            title: function(val) {\n                if (val !== \"\") {this.progress.title = 25} else {this.progress.title = 0}\n            },\n            desc: function(val) {\n                if (val !== \"\") {this.progress.desc = 25} else {this.progress.desc = 0}\n            },      \n            picture: function(val) {\n                if (val !== \"\") {this.progress.picture = 25} else {this.progress.picture = 0}\n            },\n            min_bid: function(val) {\n                if (val !== \"\") {this.progress.min_bid = 25} else {this.progress.min_bid = 0}\n            },      \n        }\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../node_modules/bulma\";\n</style>"]}]}