{"remainingRequest":"/home/hercules/funny/frontend/node_modules/babel-loader/lib/index.js!/home/hercules/funny/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/hercules/funny/frontend/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/hercules/funny/frontend/src/views/ViewPost.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/hercules/funny/frontend/src/views/ViewPost.vue","mtime":1614290382200},{"path":"/home/hercules/funny/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1613869025000},{"path":"/home/hercules/funny/frontend/node_modules/babel-loader/lib/index.js","mtime":1613869024000},{"path":"/home/hercules/funny/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1613869025000},{"path":"/home/hercules/funny/frontend/node_modules/vue-loader-v16/dist/index.js","mtime":1613869059000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAkIGZyb20gImpxdWVyeSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVmlld1Bvc3QiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBiaWQ6IDAsCiAgICAgIHBvc3Q6IHsKICAgICAgICAndGl0bGUnOiAnTG9hZGluZy4uLicsCiAgICAgICAgJ2Nsb3NlZCc6IGZhbHNlLAogICAgICAgICdpbWFnZSc6ICdMb2FkaW5nLi4uJywKICAgICAgICAnZGVzYyc6ICdMb2FkaW5nLi4uJywKICAgICAgICAnaG9zdCc6IHsKICAgICAgICAgICd1c2VybmFtZSc6ICdMb2FkaW5nLi4uJywKICAgICAgICAgICdpZCc6ICdMb2FkaW5nLi4uJwogICAgICAgIH0KICAgICAgfSwKICAgICAgdW5pdDogJycsCiAgICAgIGFtb3VudDogJycsCiAgICAgIGhpZ2hlc3Q6IHsKICAgICAgICBiaWQ6IDAsCiAgICAgICAgYmlkZGVyOiB7CiAgICAgICAgICAndXNlcm5hbWUnOiAnTG9hZGluZy4uLicsCiAgICAgICAgICAnaWQnOiAnTG9hZGluZy4uLicKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGN1cnJlbmNpZXM6ICcnLAogICAgICByYXRlczogJycKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBmZXRjaCgiaHR0cHM6Ly9hcGkuZXhjaGFuZ2VyYXRlc2FwaS5pby9sYXRlc3Q/YmFzZT1VU0QiKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgcmV0dXJuIHJlcy5qc29uKCk7CiAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIF90aGlzLnJhdGVzID0gZGF0YS5yYXRlczsKICAgIH0pOwogICAgZmV0Y2goImh0dHA6Ly8xMjcuMC4wLjE6ODAwMC9hcGkvcG9zdC8iICsgdGhpcy4kcm91dGUucGFyYW1zLmlkKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgcmV0dXJuIHJlcy5qc29uKCk7CiAgICB9KS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICBfdGhpcy5wb3N0ID0gZGF0YS5wb3N0WzBdOwogICAgICBfdGhpcy5oaWdoZXN0ID0gZGF0YS5oaWdoZXN0OwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBjb252ZXJ0OiBmdW5jdGlvbiBjb252ZXJ0KCkgewogICAgICB2YXIgY3VycmVuY2llcyA9IHsKICAgICAgICAn4oKsJzogIkVVUiIsCiAgICAgICAgJ8KjJzogIkdCUCIsCiAgICAgICAgJ8KlJzogIkpQWSIsCiAgICAgICAgJyQnOiAiVVNEIgogICAgICB9OwogICAgICB0aGlzLmFtb3VudCA9IDEgLyB0aGlzLnJhdGVzW2N1cnJlbmNpZXNbdGhpcy51bml0XV0gKiB0aGlzLmJpZDsKICAgIH0sCiAgICBzdWJtaXQ6IGZ1bmN0aW9uIHN1Ym1pdCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLmNvbnZlcnQoKTsKICAgICAgJCgiI3N1Ym1pdF9iaWQiKS5wcm9wKCJjbGFzcyIsICJidXR0b24gaXMtcHJpbWFyeSBpcy1sb2FkaW5nIik7CiAgICAgICQoIiNzdWJtaXRfYmlkIikucHJvcCgiZGlzYWJsZWQiLCB0cnVlKTsKICAgICAgdmFyIGJvZHkgPSB7CiAgICAgICAgcG9zdDogdGhpcy5wb3N0LmlkLAogICAgICAgIHVzZXI6IEpTT04ucGFyc2Uod2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyJykpLmlkLAogICAgICAgIGJpZDogdGhpcy5hbW91bnQKICAgICAgfTsKICAgICAgY29uc29sZS5sb2coIkJvZHk6ICIpOwogICAgICBjb25zb2xlLmxvZyhib2R5KTsKICAgICAgZmV0Y2goImh0dHA6Ly8xMjcuMC4wLjE6ODAwMC9hcGkvYmlkIiwgewogICAgICAgIG1ldGhvZDogJ1BVVCcsCiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoYm9keSkKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgICB2YXIgYWxlcnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhcnRpY2xlIik7CiAgICAgICAgYWxlcnQuY2xhc3NOYW1lID0gZGF0YS5jbGFzczsKICAgICAgICBhbGVydC5pbm5lckhUTUwgPSAiXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibWVzc2FnZS1oZWFkZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD4iLmNvbmNhdChkYXRhLm1lc3NhZ2UsICI8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cImRlbGV0ZVwiIGFyaWEtbGFiZWw9XCJkZWxldGVcIiBvbmNsaWNrPVwiZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1lc3NhZ2UnKS5pbm5lckhUTUwgPSAnJ1wiPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgIik7CiAgICAgICAgYWxlcnQuaWQgPSAiYWxlcnQiOwogICAgICAgICQoIi5tZXNzYWdlIikuaHRtbCgiIik7CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiLm1lc3NhZ2UiKS5hcHBlbmRDaGlsZChhbGVydCk7CiAgICAgICAgJCgiI3N1Ym1pdF9iaWQiKS5hdHRyKCJjbGFzcyIsICJidXR0b24gaXMtcHJpbWFyeSIpOwogICAgICAgICQoIiNzdWJtaXRfYmlkIikuYXR0cigiZGlzYWJsZWQiLCBmYWxzZSk7CiAgICAgICAgX3RoaXMyLmhpZ2hlc3QgPSBkYXRhLmxhc3RfYmlkOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/home/hercules/funny/frontend/src/views/ViewPost.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div>\r\n        <h2 class=\"title\" id=\"title\">{{post.title}}<span class=\"tag is-danger\" v-if=\"post.closed\">Closed</span></h2>\r\n        <div class=\"message\"></div>\r\n        <div class=\"columns\">\r\n            <div class=\"column\">\r\n                <div class=\"box\">\r\n                    <figure class=\"image is-128x28\">\r\n                        <img :src=\"post.image\">\r\n                    </figure>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"column\">\r\n                <div class=\"box\">\r\n                    <p>{{post.desc}}</p>\r\n                    <hr>\r\n                    <p>Current Bid: <strong>${{highest.bid}}</strong> by <strong>{{highest.bidder[\"username\"]}}#{{highest.bidder[\"id\"]}}</strong></p>\r\n                </div>\r\n                <hr>\r\n                <div class=\"box\">\r\n                    <h5 class=\"subtitle\">By <strong>{{post.host.username}}#{{post.host.id}}</strong></h5>\r\n                </div>\r\n                <div>\r\n                    <div class=\"field has-addons has-addons-centered\">\r\n                        <p class=\"control\">\r\n                            <span class=\"select\">\r\n                            <select v-model=\"unit\">\r\n                                <option value=\"$\">$</option>\r\n                                <option value=\"£\">£</option>\r\n                                <option value=\"€\">€</option>\r\n                                <option values=\"¥\">¥</option>\r\n                            </select>\r\n                            </span>\r\n                        </p>\r\n                        <p class=\"control\">\r\n                            <input class=\"input\" type=\"text\" placeholder=\"Amount of money\" v-model=\"bid\" id=\"bid_val\">\r\n                        </p>\r\n                        <p class=\"control\">\r\n                            <button class=\"button is-primary\" :disabled=\"post.closed\" @click=\"submit()\" id=\"submit_bid\">\r\n                            Place Bid\r\n                            </button>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport $ from \"jquery\";\r\n    export default {\r\n        name: \"ViewPost\",\r\n        data() {\r\n            return {\r\n                bid: 0,\r\n                post: {\r\n                    'title': 'Loading...',\r\n                    'closed': false,\r\n                    'image': 'Loading...',\r\n                    'desc': 'Loading...',\r\n                    'host': {\r\n                        'username': 'Loading...',\r\n                        'id': 'Loading...'\r\n                    }\r\n                },\r\n                unit: '',\r\n                amount: '',\r\n                highest: {\r\n                    bid: 0,\r\n                    bidder: {\r\n                        'username': 'Loading...',\r\n                        'id': 'Loading...'\r\n                    }\r\n                },\r\n                currencies: '',\r\n                rates: ''\r\n            }\r\n        },\r\n        mounted() {\r\n             fetch(\"https://api.exchangeratesapi.io/latest?base=USD\").then(res => res.json()).then(data => {\r\n                this.rates = data.rates\r\n            })\r\n            fetch(\"http://127.0.0.1:8000/api/post/\" + this.$route.params.id).then(res => res.json()).then(data => {\r\n                console.log(data);\r\n                this.post = data.post[0]\r\n                this.highest = data.highest\r\n            })\r\n        },\r\n        methods: {\r\n            convert() {\r\n                let currencies = {\r\n                    '€': \"EUR\",\r\n                    '£': \"GBP\",\r\n                    '¥': \"JPY\",\r\n                    '$': \"USD\"\r\n                }\r\n                this.amount = (1 / this.rates[currencies[this.unit]]) * this.bid\r\n            },\r\n \r\n            submit() {\r\n                this.convert()\r\n                $(\"#submit_bid\").prop(\"class\", \"button is-primary is-loading\")\r\n                $(\"#submit_bid\").prop(\"disabled\", true)\r\n                let body = {\r\n                    post: this.post.id,\r\n                    user: JSON.parse(window.localStorage.getItem('user')).id,\r\n                    bid: this.amount\r\n                    }\r\n                console.log(\"Body: \" ); console.log(body)\r\n                fetch(\"http://127.0.0.1:8000/api/bid\", {\r\n                    method: 'PUT',\r\n                    body: JSON.stringify(body)\r\n                }).then(res => res.json())\r\n                .then(data => {\r\n                    console.log(data)\r\n                    const alert = document.createElement(\"article\")\r\n                    alert.className = data.class\r\n                    alert.innerHTML = `\r\n                        <div class=\"message-header\">\r\n                            <p>${data.message}</p>\r\n                            <button class=\"delete\" aria-label=\"delete\" onclick=\"document.querySelector('.message').innerHTML = ''\"</button>\r\n                        </div>\r\n                    `\r\n                    alert.id = \"alert\"\r\n                    $(\".message\").html(\"\")\r\n                    document.querySelector(\".message\").appendChild(alert)\r\n                    $(\"#submit_bid\").attr(\"class\", \"button is-primary\")\r\n                    $(\"#submit_bid\").attr(\"disabled\", false)\r\n                    this.highest =  data.last_bid\r\n                })\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"../../node_modules/bulma\";\r\n#title {\r\n    text-align: center;\r\n    margin-bottom: 5vh;\r\n}\r\n</style>\r\n"],"sourceRoot":""}]}