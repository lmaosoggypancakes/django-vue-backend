{"remainingRequest":"/home/hercules/funny/pog/node_modules/babel-loader/lib/index.js!/home/hercules/funny/pog/node_modules/eslint-loader/index.js??ref--13-0!/home/hercules/funny/pog/src/auth/AuthService.js","dependencies":[{"path":"/home/hercules/funny/pog/src/auth/AuthService.js","mtime":1613012071450},{"path":"/home/hercules/funny/pog/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/hercules/funny/pog/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/hercules/funny/pog/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL2hvbWUvaGVyY3VsZXMvZnVubnkvcG9nL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL2hvbWUvaGVyY3VsZXMvZnVubnkvcG9nL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL2hvbWUvaGVyY3VsZXMvZnVubnkvcG9nL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBhdXRoMCBmcm9tICdhdXRoMC1qcyc7CmltcG9ydCBFdmVudEVtaXR0ZXIgZnJvbSAnZXZlbnRlbWl0dGVyMyc7CmltcG9ydCByb3V0ZXIgZnJvbSAnLi8uLi9yb3V0ZXInOwoKdmFyIEF1dGhTZXJ2aWNlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBBdXRoU2VydmljZSgpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBdXRoU2VydmljZSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJhdXRoZW50aWNhdGVkIiwgdGhpcy5pc0F1dGhlbnRpY2F0ZWQoKSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJhdXRoTm90aWZpZXIiLCBuZXcgRXZlbnRFbWl0dGVyKCkpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiYXV0aDAiLCBuZXcgYXV0aDAuV2ViQXV0aCh7CiAgICAgIGRvbWFpbjogJ2pvc2VmbWFjZXJhLnVzLmF1dGgwLmNvbScsCiAgICAgIGNsaWVudElEOiAnaVFwdTd1UmpMM0FaRWlsRDhOV1htYlFWVzRCRUQwUGwnLAogICAgICByZWRpcmVjdFVyaTogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MCcsCiAgICAgIGF1ZGllbmNlOiAnaHR0cHM6Ly9kamFuZ28tdnVlanMtYXBpJywKICAgICAgcmVzcG9uc2VUeXBlOiAndG9rZW4gaWRfdG9rZW4nLAogICAgICBzY29wZTogJ29wZW5pZCBwcm9maWxlJwogICAgfSkpOwoKICAgIHRoaXMubG9naW4gPSB0aGlzLmxvZ2luLmJpbmQodGhpcyk7CiAgICB0aGlzLnNldFNlc3Npb24gPSB0aGlzLnNldFNlc3Npb24uYmluZCh0aGlzKTsKICAgIHRoaXMubG9nb3V0ID0gdGhpcy5sb2dvdXQuYmluZCh0aGlzKTsKICAgIHRoaXMuaXNBdXRoZW50aWNhdGVkID0gdGhpcy5pc0F1dGhlbnRpY2F0ZWQuYmluZCh0aGlzKTsKICAgIHRoaXMuaGFuZGxlQXV0aGVudGljYXRpb24gPSB0aGlzLmhhbmRsZUF1dGhlbnRpY2F0aW9uLmJpbmQodGhpcyk7CiAgfSAvLyBjcmVhdGUgYW4gaW5zdGFuY2Ugb2YgYXV0aDAuV2ViQXV0aCB3aXRoIHlvdXIKICAvLyBBUEkgYW5kIENsaWVudCBjcmVkZW50aWFscwoKCiAgX2NyZWF0ZUNsYXNzKEF1dGhTZXJ2aWNlLCBbewogICAga2V5OiAibG9naW4iLAogICAgdmFsdWU6IC8vIHRoaXMgbWV0aG9kIGNhbGxzIHRoZSBhdXRob3JpemUoKSBtZXRob2QKICAgIC8vIHdoaWNoIHRyaWdnZXJzIHRoZSBBdXRoMCBsb2dpbiBwYWdlCiAgICBmdW5jdGlvbiBsb2dpbigpIHsKICAgICAgdGhpcy5hdXRoMC5hdXRob3JpemUoKTsKICAgIH0gLy8gdGhpcyBtZXRob2QgY2FsbHMgdGhlIHBhcnNlSGFzaCgpIG1ldGhvZCBvZiBBdXRoMAogICAgLy8gdG8gZ2V0IGF1dGhlbnRpY2F0aW9uIGluZm9ybWF0aW9uIGZyb20gdGhlIGNhbGxiYWNrIFVSTAoKICB9LCB7CiAgICBrZXk6ICJoYW5kbGVBdXRoZW50aWNhdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGFuZGxlQXV0aGVudGljYXRpb24oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmF1dGgwLnBhcnNlSGFzaChmdW5jdGlvbiAoZXJyLCBhdXRoUmVzdWx0KSB7CiAgICAgICAgaWYgKGF1dGhSZXN1bHQgJiYgYXV0aFJlc3VsdC5hY2Nlc3NUb2tlbiAmJiBhdXRoUmVzdWx0LmlkVG9rZW4pIHsKICAgICAgICAgIF90aGlzLnNldFNlc3Npb24oYXV0aFJlc3VsdCk7CiAgICAgICAgfSBlbHNlIGlmIChlcnIpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICBhbGVydCgiRXJyb3I6ICIuY29uY2F0KGVyci5lcnJvciwgIi4gQ2hlY2sgdGhlIGNvbnNvbGUgZm9yIGZ1cnRoZXIgZGV0YWlscy4iKSk7CiAgICAgICAgfQoKICAgICAgICByb3V0ZXIucmVwbGFjZSgnLycpOwogICAgICB9KTsKICAgIH0gLy8gc3RvcmVzIHRoZSB1c2VyJ3MgYWNjZXNzX3Rva2VuLCBpZF90b2tlbiwgYW5kIGEgdGltZSBhdAogICAgLy8gd2hpY2ggdGhlIGFjY2Vzc190b2tlbiB3aWxsIGV4cGlyZSBpbiB0aGUgbG9jYWwgc3RvcmFnZQoKICB9LCB7CiAgICBrZXk6ICJzZXRTZXNzaW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRTZXNzaW9uKGF1dGhSZXN1bHQpIHsKICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IGF1dGhSZXN1bHQuYWNjZXNzVG9rZW47CiAgICAgIHRoaXMuaWRUb2tlbiA9IGF1dGhSZXN1bHQuaWRUb2tlbjsKICAgICAgdGhpcy5wcm9maWxlID0gYXV0aFJlc3VsdC5pZFRva2VuUGF5bG9hZDsKICAgICAgdGhpcy5leHBpcmVzQXQgPSBhdXRoUmVzdWx0LmV4cGlyZXNJbiAqIDEwMDAgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgdGhpcy5hdXRoTm90aWZpZXIuZW1pdCgnYXV0aENoYW5nZScsIHsKICAgICAgICBhdXRoZW50aWNhdGVkOiB0cnVlCiAgICAgIH0pOwogICAgfSAvLyByZW1vdmUgdGhlIGFjY2VzcyBhbmQgSUQgdG9rZW5zIGZyb20gdGhlCiAgICAvLyBsb2NhbCBzdG9yYWdlIGFuZCBlbWl0cyB0aGUgYXV0aENoYW5nZSBldmVudAoKICB9LCB7CiAgICBrZXk6ICJsb2dvdXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvZ291dCgpIHsKICAgICAgZGVsZXRlIHRoaXMuYWNjZXNzVG9rZW47CiAgICAgIGRlbGV0ZSB0aGlzLmlkVG9rZW47CiAgICAgIGRlbGV0ZSB0aGlzLmV4cGlyZXNBdDsKICAgICAgdGhpcy5hdXRoTm90aWZpZXIuZW1pdCgnYXV0aENoYW5nZScsIGZhbHNlKTsgLy8gbmF2aWdhdGUgdG8gdGhlIGhvbWUgcm91dGUKCiAgICAgIHJvdXRlci5yZXBsYWNlKCcvJyk7CiAgICB9IC8vIGNoZWNrcyBpZiB0aGUgdXNlciBpcyBhdXRoZW50aWNhdGVkCgogIH0sIHsKICAgIGtleTogImlzQXV0aGVudGljYXRlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaXNBdXRoZW50aWNhdGVkKCkgewogICAgICAvLyBDaGVjayB3aGV0aGVyIHRoZSBjdXJyZW50IHRpbWUgaXMgcGFzdCB0aGUKICAgICAgLy8gYWNjZXNzIHRva2VuJ3MgZXhwaXJ5IHRpbWUKICAgICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpIDwgdGhpcy5leHBpcmVzQXQ7CiAgICB9IC8vIGEgc3RhdGljIG1ldGhvZCB0byBnZXQgdGhlIGFjY2VzcyB0b2tlbgoKICB9LCB7CiAgICBrZXk6ICJnZXRBdXRoVG9rZW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldEF1dGhUb2tlbigpIHsKICAgICAgcmV0dXJuIHRoaXMuYWNjZXNzVG9rZW47CiAgICB9IC8vIGEgbWV0aG9kIHRvIGdldCB0aGUgVXNlciBwcm9maWxlCgogIH0sIHsKICAgIGtleTogImdldFVzZXJQcm9maWxlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRVc2VyUHJvZmlsZShjYikgewogICAgICByZXR1cm4gdGhpcy5wcm9maWxlOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEF1dGhTZXJ2aWNlOwp9KCk7CgpleHBvcnQgeyBBdXRoU2VydmljZSBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["/home/hercules/funny/pog/src/auth/AuthService.js"],"names":["auth0","EventEmitter","router","AuthService","isAuthenticated","WebAuth","domain","clientID","redirectUri","audience","responseType","scope","login","bind","setSession","logout","handleAuthentication","authorize","parseHash","err","authResult","accessToken","idToken","console","log","alert","error","replace","profile","idTokenPayload","expiresAt","expiresIn","Date","getTime","authNotifier","emit","authenticated","cb"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,UAAlB;AACA,OAAOC,YAAP,MAAyB,eAAzB;AACA,OAAOC,MAAP,MAAmB,aAAnB;;IAEqBC,W;AAInB,yBAAe;AAAA;;AAAA,2CAHC,KAAKC,eAAL,EAGD;;AAAA,0CAFA,IAAIH,YAAJ,EAEA;;AAAA,mCAUP,IAAID,KAAK,CAACK,OAAV,CAAkB;AACxBC,MAAAA,MAAM,EAAE,0BADgB;AAExBC,MAAAA,QAAQ,EAAE,kCAFc;AAGxBC,MAAAA,WAAW,EAAE,uBAHW;AAIxBC,MAAAA,QAAQ,EAAE,0BAJc;AAKxBC,MAAAA,YAAY,EAAE,gBALU;AAMxBC,MAAAA,KAAK,EAAE;AANiB,KAAlB,CAVO;;AACb,SAAKC,KAAL,GAAa,KAAKA,KAAL,CAAWC,IAAX,CAAgB,IAAhB,CAAb;AACA,SAAKC,UAAL,GAAkB,KAAKA,UAAL,CAAgBD,IAAhB,CAAqB,IAArB,CAAlB;AACA,SAAKE,MAAL,GAAc,KAAKA,MAAL,CAAYF,IAAZ,CAAiB,IAAjB,CAAd;AACA,SAAKT,eAAL,GAAuB,KAAKA,eAAL,CAAqBS,IAArB,CAA0B,IAA1B,CAAvB;AACA,SAAKG,oBAAL,GAA4B,KAAKA,oBAAL,CAA0BH,IAA1B,CAA+B,IAA/B,CAA5B;AACD,G,CAED;AACA;;;;;WAUA;AACA;AACA,qBAAS;AACP,WAAKb,KAAL,CAAWiB,SAAX;AACD,K,CAED;AACA;;;;WACA,gCAAwB;AAAA;;AACtB,WAAKjB,KAAL,CAAWkB,SAAX,CAAqB,UAACC,GAAD,EAAMC,UAAN,EAAqB;AACxC,YAAIA,UAAU,IAAIA,UAAU,CAACC,WAAzB,IAAwCD,UAAU,CAACE,OAAvD,EAAgE;AAC9D,UAAA,KAAI,CAACR,UAAL,CAAgBM,UAAhB;AACD,SAFD,MAEO,IAAID,GAAJ,EAAS;AACdI,UAAAA,OAAO,CAACC,GAAR,CAAYL,GAAZ;AACAM,UAAAA,KAAK,kBAAWN,GAAG,CAACO,KAAf,8CAAL;AACD;;AACDxB,QAAAA,MAAM,CAACyB,OAAP,CAAe,GAAf;AACD,OARD;AASD,K,CAED;AACA;;;;WACA,oBAAYP,UAAZ,EAAwB;AACtB,WAAKC,WAAL,GAAmBD,UAAU,CAACC,WAA9B;AACA,WAAKC,OAAL,GAAeF,UAAU,CAACE,OAA1B;AACA,WAAKM,OAAL,GAAeR,UAAU,CAACS,cAA1B;AACA,WAAKC,SAAL,GAAiBV,UAAU,CAACW,SAAX,GAAuB,IAAvB,GAA8B,IAAIC,IAAJ,GAAWC,OAAX,EAA/C;AACA,WAAKC,YAAL,CAAkBC,IAAlB,CAAuB,YAAvB,EAAqC;AAACC,QAAAA,aAAa,EAAE;AAAhB,OAArC;AACD,K,CAED;AACA;;;;WACA,kBAAU;AACR,aAAO,KAAKf,WAAZ;AACA,aAAO,KAAKC,OAAZ;AACA,aAAO,KAAKQ,SAAZ;AACA,WAAKI,YAAL,CAAkBC,IAAlB,CAAuB,YAAvB,EAAqC,KAArC,EAJQ,CAKR;;AACAjC,MAAAA,MAAM,CAACyB,OAAP,CAAe,GAAf;AACD,K,CAED;;;;WACA,2BAAmB;AACjB;AACA;AACA,aAAO,IAAIK,IAAJ,GAAWC,OAAX,KAAuB,KAAKH,SAAnC;AACD,K,CAED;;;;WACA,wBAAgB;AACd,aAAO,KAAKT,WAAZ;AACD,K,CAED;;;;WACA,wBAAgBgB,EAAhB,EAAoB;AAClB,aAAO,KAAKT,OAAZ;AACD;;;;;;SA/EkBzB,W","sourcesContent":["import auth0 from 'auth0-js'\nimport EventEmitter from 'eventemitter3'\nimport router from './../router'\n\nexport default class AuthService {\n  authenticated = this.isAuthenticated()\n  authNotifier = new EventEmitter()\n\n  constructor () {\n    this.login = this.login.bind(this)\n    this.setSession = this.setSession.bind(this)\n    this.logout = this.logout.bind(this)\n    this.isAuthenticated = this.isAuthenticated.bind(this)\n    this.handleAuthentication = this.handleAuthentication.bind(this)\n  }\n\n  // create an instance of auth0.WebAuth with your\n  // API and Client credentials\n  auth0 = new auth0.WebAuth({\n    domain: 'josefmacera.us.auth0.com',\n    clientID: 'iQpu7uRjL3AZEilD8NWXmbQVW4BED0Pl',\n    redirectUri: 'http://localhost:8080',\n    audience: 'https://django-vuejs-api',\n    responseType: 'token id_token',\n    scope: 'openid profile'\n  })\n\n  // this method calls the authorize() method\n  // which triggers the Auth0 login page\n  login () {\n    this.auth0.authorize()\n  }\n\n  // this method calls the parseHash() method of Auth0\n  // to get authentication information from the callback URL\n  handleAuthentication () {\n    this.auth0.parseHash((err, authResult) => {\n      if (authResult && authResult.accessToken && authResult.idToken) {\n        this.setSession(authResult)\n      } else if (err) {\n        console.log(err)\n        alert(`Error: ${err.error}. Check the console for further details.`)\n      }\n      router.replace('/')\n    })\n  }\n\n  // stores the user's access_token, id_token, and a time at\n  // which the access_token will expire in the local storage\n  setSession (authResult) {\n    this.accessToken = authResult.accessToken\n    this.idToken = authResult.idToken\n    this.profile = authResult.idTokenPayload\n    this.expiresAt = authResult.expiresIn * 1000 + new Date().getTime()\n    this.authNotifier.emit('authChange', {authenticated: true})\n  }\n\n  // remove the access and ID tokens from the\n  // local storage and emits the authChange event\n  logout () {\n    delete this.accessToken\n    delete this.idToken\n    delete this.expiresAt\n    this.authNotifier.emit('authChange', false)\n    // navigate to the home route\n    router.replace('/')\n  }\n\n  // checks if the user is authenticated\n  isAuthenticated () {\n    // Check whether the current time is past the\n    // access token's expiry time\n    return new Date().getTime() < this.expiresAt\n  }\n\n  // a static method to get the access token\n  getAuthToken () {\n    return this.accessToken\n  }\n\n  // a method to get the User profile\n  getUserProfile (cb) {\n    return this.profile\n  }\n}"]}]}